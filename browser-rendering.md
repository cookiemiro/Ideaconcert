<h2>1. 브라우저 렌더링</h2>

웹 페이지에 접속했을 때,<br/>
웹 페이지는 미리 만들어진걸 가져오는게 아닌 실시간으로 그려지는 것에 가까운데,<br/>
이 때 실시간으로 그려지는 과정을 브라우저의 렌더링 과정이라고 합니다.

브라우저가 화면에 나타나는 요소를 렌더링할 때 렌더링 엔진을 사용하는데,<br/>
CRP 프로세스를 사용합니다.

렌더링 엔진의 예 : 크롬-블링크, 사파리-웹킷, 파이어폭스-개코<br/>

CRP 프로세스는 크게 5단계로 분류할 수 있습니다.

<h3>1. HTML을 파싱 후 DOM 트리를 구축합니다.</h3>

브라우저가 페이지를 렌더링 하려면 HTML 파일을 해석해야 합니다.<br/>
브라우저는 파싱을 통해 HTML 파일을 해석하여 DOM 트리를 구성합니다.

<h3>2. 파싱 중 HTML에 CSS가 포함되어 있다면 CSSOM 트리 구성도 함께 합니다.</h3>

브라우저의 렌더링 엔진은 HTML 문서를 처음부터 순차적으로 파싱하여 DOM을 생성하다가 CSS를 로드하는 태그를 만나면 DOM의 생성을 일시 중단하고,<br/>
CSS도 HTML과 동일한 파싱 과정을 거치며 해석하여 CSSOM을 생성합니다.

<h3>3. Style</h3>
Style 단계에서는 DOM 트리와 CSSOM 트리를 결합시켜서 렌더링을 통해 렌더 트리를 구성합니다.<br/>
display : none 속성과 같은 브라우저 화면에 보여지지 않는 것들은 포함하지 됩니다.

<h3>4.Layout</h3>
('Reflow' 라고도 합니다.)<br/>
렌더 트리를 화면에 배치하기 위해 정확한 위치와 크기를 계산합니다.<br/>
노드의 위치와 크기를 계산하고 렌더 트리에 반영합니다.

<h3>5. Paint</h3>
Layout 단계에서 계산된 값을 이용하여 각 노드들을 실제 픽셀로 변환합니다.<br/>
픽셀로 변환된 결과는 하나가 아닌 여러 개의 레이어로 관리됩니다.<br/>
'페인팅' 또는 '레스터화'라고 합니다.

---

- CRP(Critical Rendering Path, 중요 렌더링 경로) : 브라우저가 HTML, CSS, JavaScript를 화면에 픽셀로 변환하는 일련의 단계</br>
- 파싱 : 문서의 내용을 토큰으로 분석하고, 문법적 의미와 구조를 반영한 파스트리를 생성하는 과정</br>
- DOM : 웹 페이지를 이루는 태그들을 자바스크립트가 이용할 수 있게 브라우저가 트리 모양으로 만든 객체 모델, HTML과 스크립팅 언어(JavaScript)를 이어주는 역할<br/>
- DOM 트리 : 브라우저가 이해할 수 있는 노드들로 구성된 트리 자료 구조<br/>
- 노드 : 요소를 나타내는 단위, <br/>
  요소, 속성, 텍스트, 주석 등으로 나누어지는데, 예를 들어 <.div>, <.p><br/>
- CSSOM(CSS Object Model)

---

<h2>브라우저 렌더링 과정</h2>
<h3>1. 브라우저 엔진이 사용자 인터페이스로부터 URI를 받아 자료 저장소를 찾습니다.</h3>

사용자가 주소창에 입력하는 순간 브라우저 엔진에게 전달하고,<br/>
브라우저 엔진은 주소값에 해당하는 데이터를 먼저 자료저장소에서 찾아봅니다.<br/>
사용자가 URI를 입력할 때마다 항상 서버로 가서 똑같은 데이터를 받아오는게 아니라,<br/>
불필요한 통신을 줄이기 위해 자료저장소에 자주 방문하는 데이터를 저장해둡니다. => 캐싱<br/>
따라서 브라우저 엔진은 URI에 해당하는 자료를 자료저장소에서 찾고 있으면 렌더링 엔진에게 줍니다.

<h3>렌더링 엔진이 브라우저 엔진 또는 네트워크 레이어로부터 자료를 받습니다.</h3>

**캐싱된 자료가 있다면?** 렌더링 엔진은 브라우저 엔진으로부터 자료를 받아 HTML, CSS, Image 등을 파싱합니다.<br/>
**캐싱된 자료가 없다면?** 서버에 요청해서 자료를 찾아봅니다.<br/>
이 경우, 렌더링 엔진에게 사용자가 입력한 주소값(URI)를 전달하고 렌더링 엔진은 통신 레이어에 전달합니다.<br/>
통신 레이어는 URI 주소값으로 서버에 요청을 보내고,<br/>
응답으로 주소값에 해당하는 HTML, CSS, JS값을 받으면 렌더링 엔진에게 줍니다.

<h3>렌더링 엔진이 자바스크립트 해석기 및 네트워크와 소통하며 렌더링 구조를 그려 UI백엔드에 넘긴다.</h3>
렌더링 과정의 중추 역할을 하는 렌더링 엔진이 HTML과 CSS를 파싱하여 브라우저 엔진으로 받거나 통신 레이어로부터 전달받은 리소스 중,<br/>
HTML과 CSS를 직접 파싱하고, JS는 크롬 기준 v8엔진으로 파서에게 전달하여 파싱한다.<br/>
파싱한 결과를 렌더링 엔진에게 다시 전달하며, 파싱한 HTML 결과인 DOM 트리를 자바스크립트로 조작한다.<br/>
조작이 완료된 DOM 트리 구성 요소는 렌더링 트리 구조로 변환되고,<br/>
이렇게 최종적으로 만들어진 Render Object를 렌더링 엔진이 UI 백엔드에 주어서 화면에 페인팅해준다.<br/>

---

- URI : 특정 리소스를 식별하는 통합 자원 식별자, 웹 기술에서 사용하는 논리적 또는 물리적 리소스를 식별하는 고유한 문자열 시퀀스<br/>
- URL : 웹 주소 컴퓨터 네트워크 상에서 리소스가 어디있는지 알려주기 위한 규약, URI의 서브셋<br/>
- UI 백엔드 : 렌더링 엔진에서 생성된 렌더 트리를 브라우저에 그리는 역할

---

<h2>렌더링의 원리를 이해해야 되는 이유는?</h2>

**성능 최적화:** 렌더링 프로세스를 이해하면 성능을 최적화하는 방법을 파악할 수 있습니다.<br/>
불필요한 레이아웃 계산이나 페인트 작업을 줄이는 등의 방법을 통해 웹 페이지의 성능을 향상시킬 수 있습니다.<br/>

**크로스 브라우징:** 각 각 브라우저는 렌더링 엔진을 가지고 있으며, 이러한 엔진은 각각 다른 렌더링 규칙을 가지고 있습니다.<br/>
렌더링의 원리를 이해하면 각 브라우저에서 어떻게 페이지가 표시되는지 이해하고 크로스 브라우징 이슈를 해결할 수 있습니다.<br/>

**디자인 결정:** 웹 페이지의 디자인을 결정할 때 렌더링 프로세스를 고려해야 합니다. <br/>
예를 들어, 어떤 요소가 먼저 표시되어야 하는지, 어떤 CSS 속성이 성능에 미치는 영향 등을 고려해야 합니다.<br/>

**웹 성능 향상:** 웹 성능은 사용자 경험에 직접적으로 영향을 미칩니다. <br/>
웹 페이지가 빠르게 로드되고 렌더링되면 사용자는 페이지를 더 즐겁게 사용할 수 있습니다. <br/>
따라서 렌더링 프로세스를 이해하고 성능을 최적화하여 사용자의 만족도를 높일 수 있습니다.<br/>

**디버깅:** 웹 페이지가 예상대로 렌더링되지 않을 때 디버깅하는 것은 중요합니다. <br/>
렌더링 프로세스를 이해하면 레이아웃 문제, 스타일 충돌 등의 문제를 신속하게 해결할 수 있습니다.<br/>

**새로운 기술 이해:** 웹 기술은 지속적으로 발전하고 있습니다. <br/>
새로운 CSS 기능이나 웹 API가 출시될 때마다 해당 기능이 어떻게 렌더링되고 동작하는지 이해하는 것이 중요합니다.<br/>

---

- 크로스 브라우징 : 웹 페이지 제작 시 모든 브라우저에서 깨지지 않고 의도한 대로 올바르게(호환성) 나오게 하는 작업<br>
- 디버깅 : 모든 소프트웨어에서 소스 코드의 오류 또는 버그를 찾아서 수정하는 과정

---

<!-- <h2>브라우저 렌더링의 최적화 방법</h2>

**리플로우:** 스타일 단계에서 구성되는 렌더 트리는 자바스크립트에 의해 DOM 트리, CSSOM 트리가 변경될 때 다시 재구성됩니다. <br>
DOM이 추가/삭제되거나 요소에 기하적인 영향(높이, 넓이, 위치)을 주는 CSS 속성 값을 변경하는 경우, 렌더 트리가 다시 재구성되는 것입니다.<br>
즉, 레이아웃부터 이후 과정을 다시 수행하며 이것을 **리플로우** 라고 합니다. <br>

**리페인트:** 리플로우는 요소에 기하적인 영향을 주는 CSS 속성 값을 변경할 때 발생한다고 했는데, 반대로 영향을 주지 않는 CSS 속성값을 변경하면 레이아웃 과정을 건너뜁니다.<br/>
즉 background-color, visibility와 같이 레이아웃에는 영향을 주지 않는 스타일 속성이 변경되면, 이는 페인트부터 수행하기에 '리페인트' 라고 합니다.<br/> -->

<h2>참고문헌</h2>

- https://velog.io/@blcklamb/%EA%B8%B0%EC%88%A0-%EB%A9%B4%EC%A0%91-%EC%8A%A4%ED%84%B0%EB%94%94-%EB%B0%A9%EB%B2%95%EB%B6%80%ED%84%B0-%EC%98%88%EC%83%81-%EB%A9%B4%EC%A0%91-%EC%A7%88%EB%AC%B8%EA%B9%8C%EC%A7%80
  <br/>
- https://github.com/Esoolgnah/Frontend-Interview-Questions
  <br/>
- https://enjoydev.life/blog/frontend/2-browser-rendering
  <br/>
- https://hyojin96.tistory.com/entry/%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%9D%98-%EB%A0%8C%EB%8D%94%EB%A7%81-%EA%B3%BC%EC%A0%95-Render-Tree%EC%99%80-DOM-Tree%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90
  <br/>
- https://east-star.tistory.com/8
  <br/>
