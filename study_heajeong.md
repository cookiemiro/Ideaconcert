<h2>1. 브라우저 렌더링</h2>

웹 페이지에 접속했을 때,<br/>
웹 페이지는 미리 만들어진걸 가져오는게 아닌 실시간으로 그려지는 것에 가까운데,<br/>
이 때 실시간으로 그려지는 과정을 브라우저의 렌더링 과정이라고 합니다.

브라우저가 화면에 나타나는 요소를 렌더링할 때 렌더링 엔진을 사용하는데,<br/>
CRP 프로세스를 사용합니다.

<h5>렌더링 엔진의 예 : 크롬-블링크, 사파리-웹킷, 파이어폭스-개코</h5>

CRP 프로세스는 크게 5단계로 분류할 수 있습니다.

<h4>1. HTML을 파싱 후 DOM 트리를 구축합니다.</h4>

브라우저가 페이지를 렌더링 하려면 HTML 파일을 해석해야 합니다.<br/>
브라우저는 파싱을 통해 HTML 파일을 해석하여 DOM 트리를 구성합니다.

<h4>2. 파싱 중 HTML에 CSS가 포함되어 있다면 CSSOM 트리 구성도 함께 합니다.</h4>

브라우저의 렌더링 엔진은 HTML 문서를 처음부터 순차적으로 파싱하여 DOM을 생성하다가 CSS를 로드하는 태그를 만나면 DOM의 생성을 일시 중단하고,<br/>
CSS도 HTML과 동일한 파싱 과정을 거치며 해석하여 CSSOM을 생성합니다.

<h4>3. Style</h4>
Style 단계에서는 DOM 트리와 CSSOM 트리를 결합시켜서 렌더링을 통해 렌더 트리를 구성합니다.<br/>
display : none 속성과 같은 브라우저 화면에 보여지지 않는 것들은 포함하지 않습니다.<br/>
visibility : hidden 속성은 보여지지 않지만 공간을 차지하기 때문에 포함이 됩니다.

<h4>4.Layout</h4>
('Reflow' 라고도 합니다.)<br/>
렌더 트리를 화면에 배치하기 위해 정확한 위치와 크기를 계산합니다.<br/>
노드의 위치와 크기를 계산하고 렌더 트리에 반영합니다.

<h4>5. Paint</h4>
Layout 단계에서 계산된 값을 이용하여 각 노드들을 실제 픽셀로 변환합니다.<br/>
픽셀로 변환된 결과는 하나가 아닌 여러 개의 레이어로 관리됩니다.<br/>
'페인팅' 또는 '레스터화'라고 합니다.

---

- CRP(Critical Rendering Path, 중요 렌더링 경로) : 브라우저가 HTML, CSS, JavaScript를 화면에 픽셀로 변환하는 일련의 단계</br>
- 파싱 : 문서의 내용을 토큰으로 분석하고, 문법적 의미와 구조를 반영한 파스트리를 생성하는 과정</br>
- DOM : 웹 페이지를 이루는 태그들을 자바스크립트가 이용할 수 있게 브라우저가 트리 모양으로 만든 객체 모델, HTML과 스크립팅 언어(JavaScript)를 이어주는 역할<br/>
- DOM 트리 : 브라우저가 이해할 수 있는 노드들로 구성된 트리 자료 구조<br/>
- 노드 : 요소를 나타내는 단위, <br/>
  요소, 속성, 텍스트, 주석 등으로 나누어지는데, 예를 들어 <.div>, <.p><br/>
- CSSOM(CSS Object Model)

---

<h2>브라우저 렌더링 과정</h2>
<h4>1. 브라우저 엔진이 사용자 인터페이스로부터 URI를 받아 자료 저장소를 찾습니다.<h4>

사용자가 주소창에 입력하는 순간 브라우저 엔진에게 전달하고,<br/>
브라우저 엔진은 주소값에 해당하는 데이터를 먼저 자료저장소에서 찾아봅니다.<br/>
사용자가 URI를 입력할 때마다 항상 서버로 가서 똑같은 데이터를 받아오는게 아니라,<br/>
불필요한 통신을 줄이기 위해 자료저장소에 자주 방문하는 데이터를 저장해둡니다. => 캐싱<br/>
따라서 브라우저 엔진은 URI에 해당하는 자료를 자료저장소에서 찾고 있으면 렌더링 엔진에게 줍니다.

<h4>렌더링 엔진이 브라우저 엔진 또는 네트워크 레이어로부터 자료를 받습니다.</h4>
**캐싱된 자료가 있다면?** 렌더링 엔진은 브라우저 엔진으로부터 자료를 받아 HTML, CSS, Image 등을 파싱합니다.<br/>
**캐싱된 자료가 없다면?** 서버에 요청해서 자료를 찾아봅니다.<br/>
이 경우, 렌더링 엔진에게 사용자가 입력한 주소값(URI)를 전달하고 렌더링 엔진은 통신 레이어에 전달합니다.<br/>
통신 레이어는 URI 주소값으로 서버에 요청을 보내고,<br/>
응답으로 주소값에 해당하는 HTML, CSS, JS값을 받으면 렌더링 엔진에게 줍니다.

<h4>렌더링 엔진이 자바스크립트 해석기 및 네트워크와 소통하며 렌더링 구조를 그려 UI백엔드에 넘긴다.</h4>
렌더링 과정의 중추 역할을 하는 렌더링 엔진이 HTML과 CSS를 파싱하여 브라우저 엔진으로 받거나 통신 레이어로부터 전달받은 리소스 중,<br/>
HTML과 CSS를 직접 파싱하고, JS는 크롬 기준 v8엔진으로 파서에게 전달하여 파싱한다.<br/>
파싱한 결과를 렌더링 엔진에게 다시 전달하며, 파싱한 HTML 결과인 DOM 트리를 자바스크립트로 조작한다.<br/>
조작이 완료된 DOM 트리 구성 요소는 렌더링 트리 구조로 변환되고,<br/>
이렇게 최종적으로 만들어진 Render Object를 렌더링 엔진이 UI 백엔드에 주어서 화면에 페인팅해준다.<br/>

---

- URI : 특정 리소스를 식별하는 통합 자원 식별자, 웹 기술에서 사용하는 논리적 또는 물리적 리소스를 식별하는 고유한 문자열 시퀀스<br/>
- URL : 웹 주소 컴퓨터 네트워크 상에서 리소스가 어디있는지 알려주기 위한 규약, URI의 서브셋<br/>
- UI 백엔드 : 렌더링 엔진에서 생성된 렌더 트리를 브라우저에 그리는 역할

---
